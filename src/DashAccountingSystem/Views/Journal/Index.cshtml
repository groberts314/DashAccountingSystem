@using DashAccountingSystem.Models
@model IEnumerable<JournalEntryDetailedViewModel>
@{
    ViewData["Title"] = "Journal";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var tenant = ViewBag.Tenant;
}

<partial name="~/Views/Shared/_TenantMastheadAndNavPartial.cshtml" />

<a class="btn btn-primary"
   asp-route="addJournalEntry"
   asp-route-tenantid="@tenant.Id"
   role="button"
>
    Add Entry
</a>

<div style="margin-top:22px">
    <h3>Pending Journal Entries</h3>
    <table class="table">
        <thead>
            <tr>
                <th class="col-md-2">Entry Date</th>
                <th class="col-md-5">Description</th>
                <th class="col-md-2">Amount</th>
                <th class="col-md-3"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in Model)
            {
                <tr>
                    <td>@entry.EntryDate.ToString("d")</td>
                    <td>@entry.Description</td>
                    <td style="text-align:right">
                        <small>@entry.Accounts.First().AssetType</small> @entry.Accounts.Sum(a => a.Debit).ToString("N2")
                    </td>
                    <td style="text-align:right">
                        <partial name="_PendingJournalEntryLinksPartial" for="@entry" />
                        <a asp-route="journalEntryDetails" asp-route-tenantid="@tenant.Id" asp-route-entryid="@entry.EntryId">
                            View
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

